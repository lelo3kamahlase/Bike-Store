@model IEnumerable<u24753328_HW03.Models.ProductViewModel>

@{
    ViewBag.Title = "Product Catalogue";
    int pageNumber = ViewBag.PageNumber ?? 1;
    int totalPages = ViewBag.TotalPages ?? 1;
    string currentBrand = ViewBag.CurrentBrandFilter;
    string currentCategory = ViewBag.CurrentCategoryFilter;
    string currentSearchQuery = ViewBag.CurrentSearchQuery;

    
    var brandList = ViewBag.BrandList as List<string> ?? new List<string>();
    var categoryList = ViewBag.CategoryList as List<string> ?? new List<string>();
}

<style>
    
    .text-gold {
        color: #B8860B !important; 
    }

    .btn-gold {
        background-color: #FFD700;
        border-color: #FFD700;
        color: #333 !important;
        font-weight: 600;
       
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease-in-out;
        border-radius: .4rem;
    }

        .btn-gold:hover {
            background-color: #DAA520;
            border-color: #DAA520;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

    .card-glossy {
        border: 1px solid #eee; 
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08); 
        border-radius: .6rem;
    }

    .table-hover-elegant tbody tr:hover {
        background-color: #f8f9fa !important; 
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        transform: translateY(-1px);
        transition: all 0.2s ease;
    }

    .table-hover-elegant th {
        border-bottom: 2px solid #B8860B; 
        font-weight: 500; 
        color: #555;
    }

    .table-hover-elegant td {
        border-top: 1px solid #f0f0f0; 
        color: #333; 
    }

 
    .form-control, .form-select {
        border-radius: .4rem;
        border-color: #ddd; 
        box-shadow: inset 0 1px 1px rgba(0,0,0,.04); 
    }

    
    .page-item.active .page-link {
        background-color: #B8860B;
        border-color: #B8860B;
        color: white;
    }

    .page-link {
        color: #B8860B;
        border-color: #ddd;
    }

    .title-clearance {
      
        padding-top: 60px;
        margin-top: 0 !important;
    }
</style>


<h2 class="text-gold display-4 fw-light mb-0 title-clearance" style="text-shadow: 1px 1px 1px rgba(0,0,0,0.05);">Product Catalogue ✨</h2>
<hr class="mb-4" />

@using (Html.BeginForm("Index", "Products", FormMethod.Get, new { @class = "mb-4" }))
{
    <input type="hidden" name="page" value="1" />

    
    <div class="row align-items-center gx-3 mb-4">

        
        <div class="col-md-3 mb-2">
            @Html.DropDownList("brandFilter",
                new SelectList(brandList, currentBrand),
                "Filter by Brand",
                new { @class = "form-select" })
        </div>

       
        <div class="col-md-3 mb-2">
            @Html.DropDownList("categoryFilter",
                new SelectList(categoryList, currentCategory),
                "Filter by Category",
                new { @class = "form-select" })
        </div>

        <div class="col-md-4 mb-2">
            <input type="text" name="searchQuery" class="form-control" value="@currentSearchQuery" placeholder="Search Product, Brand, or Category" />
        </div>

        @* Apply Button *@
        <div class="col-md-2 mb-2 d-grid">
            <button type="submit" class="btn btn-gold btn-md">Apply</button>
        </div>
    </div>
}

<div class="card card-glossy mt-3 border-0">
   
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover-elegant mb-0">
                <thead class="bg-light">
                    <tr>
                        <th class="py-3 text-uppercase">Brand</th>
                        <th class="py-3 text-uppercase">Product Name</th>
                        <th class="py-3 text-uppercase">Category</th>
                        <th class="py-3 text-uppercase">Model Year</th>
                        <th class="py-3 text-uppercase">List Price</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model != null && Model.Any())
                    {
                        foreach (var item in Model)
                        {
                            <tr>
                                <td>@Html.DisplayFor(modelItem => item.BrandName)</td>
                                <td>@Html.DisplayFor(modelItem => item.BicycleName)</td>
                                <td>@Html.DisplayFor(modelItem => item.CategoryName)</td>
                                <td>@Html.DisplayFor(modelItem => item.Description)</td> 
                                <td class="text-gold fw-bold">@item.Price.ToString("C")</td> 
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="5" class="text-center text-muted p-5">
                                No products found matching the current criteria.
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>


<nav aria-label="Page navigation" class="mt-3">
    <ul class="pagination justify-content-center">
       
        <li class="page-item @(pageNumber <= 1 ? "disabled" : "")">
            <a class="page-link fw-bold"
               href="@Url.Action("Index", new { page = pageNumber - 1, brandFilter = currentBrand, categoryFilter = currentCategory, searchQuery = currentSearchQuery })"
               aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>

        @for (int i = 1; i <= totalPages; i++)
        {
            <li class="page-item @(i == pageNumber ? "active" : "")">
                <a class="page-link"
                   href="@Url.Action("Index", new { page = i, brandFilter = currentBrand, categoryFilter = currentCategory, searchQuery = currentSearchQuery })">@i</a>
            </li>
        }

        
        <li class="page-item @(pageNumber >= totalPages ? "disabled" : "")">
            <a class="page-link fw-bold"
               href="@Url.Action("Index", new { page = pageNumber + 1, brandFilter = currentBrand, categoryFilter = currentCategory, searchQuery = currentSearchQuery })"
               aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
    </ul>
</nav>